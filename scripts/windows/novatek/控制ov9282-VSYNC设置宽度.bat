@echo off

chcp.com 65001

set CUR_DIR=%~dp0

set PATH=%SystemRoot%;%SystemRoot%\system32;%CUR_DIR%\..\bin\;


::         寄存器和数值
set regaddr=0x43 0x11
set regdata=0xBB

::write
for /f "delims=" %%f in ('checksum.exe 0x6e 0x6 0x11 0x08 0xC0 %regaddr% %regdata%') do (set checksum=%%f)
udb.exe shell himax-w 8 0x06 0x11 0x08 0xC0 %regaddr% %regdata% %checksum%


::read
for /f "delims=" %%f in ('checksum.exe 0x6e 0x6 0x12 0x08 0xC0 %regaddr% 0x01') do (set checksum=%%f)
udb.exe shell himax-w 8 0x06 0x12 0x08 0xC0 %regaddr% 0x01 %checksum%
udb.exe shell i2ctransfer -f -y 2 r7@0x37




::         寄存器和数值
set regaddr=0x43 0x12
set regdata=0xCC

::write
for /f "delims=" %%f in ('checksum.exe 0x6e 0x6 0x11 0x08 0xC0 %regaddr% %regdata%') do (set checksum=%%f)
udb.exe shell himax-w 8 0x06 0x11 0x08 0xC0 %regaddr% %regdata% %checksum%


::read
for /f "delims=" %%f in ('checksum.exe 0x6e 0x6 0x12 0x08 0xC0 %regaddr% 0x01') do (set checksum=%%f)
udb.exe shell himax-w 8 0x06 0x12 0x08 0xC0 %regaddr% 0x01 %checksum%
udb.exe shell i2ctransfer -f -y 2 r7@0x37
pause

::i2ctransfer  -f -y 2 w8@0x37 0x06 0x11 0x08 0xC0 0x35 0x09 0x10 0x9d
::i2ctransfer  -f -y 2 w8@0x37 0x06 0x12 0x08 0xC0 0x35 0x09 0x01 0x8F
::i2ctransfer  -f -y 2 r7@0x37